version: 2

models:
  - name: raw_retail_data_mart
    description: "Raw retail data mart source table"
    columns:
      - name: PRODUCTID
        description: "Product identifier"
        data_type: integer
        tests:
          - not_null
      - name: PRODUCTNAME
        description: "Product name"
        data_type: varchar(255)
      - name: CATEGORY
        description: "Product category"
        data_type: varchar(255)
      - name: SUBCATEGORY
        description: "Product subcategory"
        data_type: varchar(255)
      - name: SALES
        description: "Sales amount"
        data_type: integer
      - name: QUANTITY
        description: "Quantity sold"
        data_type: integer
      - name: CUSTOMERID
        description: "Customer identifier - grouping key from DataStage"
        data_type: integer
        tests:
          - not_null
      - name: CUSTOMERNAME
        description: "Customer name"
        data_type: varchar(255)
      - name: SPENDINGSCORE
        description: "Customer spending score"
        data_type: integer
      - name: ANNUALINCOMEK
        description: "Annual income in thousands"
        data_type: integer
      - name: GENDER
        description: "Customer gender"
        data_type: varchar(255)
      - name: AGE
        description: "Customer age"
        data_type: integer
      - name: CUSTOMERTYPE
        description: "Type of customer"
        data_type: varchar(255)
      - name: STOCKID
        description: "Stock identifier - grouping key from DataStage"
        data_type: integer
        tests:
          - not_null
      - name: NAME
        description: "Stock name"
        data_type: varchar(255)
      - name: RATING
        description: "Stock rating"
        data_type: integer
      - name: LOCATION
        description: "Location"
        data_type: varchar(255)
      - name: NOOFEMPLOYEES
        description: "Number of employees"
        data_type: integer
      - name: INVOICEID
        description: "Invoice identifier"
        data_type: varchar(255)
      - name: DESCRIPTION
        description: "Transaction description"
        data_type: varchar(255)
      - name: INVOICEDATE
        description: "Invoice date"
        data_type: integer
      - name: PRICE
        description: "Price"
        data_type: integer
      - name: COUNTRY
        description: "Country"
        data_type: varchar(255)

  - name: DataStage_To_DBT_Conversion_2
    description: "Customer transaction count aggregation converted from DataStage Count_Customers_Transactions_Job"
    columns:
      - name: CUSTOMERID
        description: "Customer identifier - primary grouping key from DataStage aggregator"
        data_type: integer
        tests:
          - not_null
      - name: STOCKID
        description: "Stock identifier - secondary grouping key from DataStage aggregator"
        data_type: integer
        tests:
          - not_null
      - name: TOTAL_ORDERS_NUM
        description: "Total number of transactions per customer and stock - derived from RecCount() in DataStage"
        data_type: integer
        tests:
          - not_null